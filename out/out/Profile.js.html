<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Profile.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Profile.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import axios from 'axios';
import React, { useEffect, useState } from 'react';
import EditIcon from "@material-ui/icons/Edit";
import { Modal } from '@material-ui/core';
import { ProfileEdit } from './ProfileEdit';
import { Button } from '@material-ui/core';

const Profile = () => {
    const userId = localStorage.getItem("userId");
    const userToken = localStorage.getItem("userToken");
    const [entryOpen, setEntryOpen] = useState(false);
    const [user, setUser] = useState({
        name: '',
        email: '',
        phone_number: '',
        gender: '',
        image: ''
    });


    /**
      * Represents Logged-in User Profile Module
      * @module {function} User Profile
      */
    useEffect(async () => {
<<<<<<< HEAD
        await axios.get(`https://ingendynamics.com/api/v1/user?userId=${userId}`,
=======
        await axios.get(` https://ingendynamics.com/api/v1/user?userId=${userId}`,
>>>>>>> fd5f6bbcf7a0cd2e0e60dd73656c3f88196b8a0a
            {
                headers: {
                    Authorization: `Bearer ${userToken}`
                }
            })
            .then(res => {
                console.log("res", res);
                setUser({
                    name: res.data.data[0].name,
                    email: res.data.data[0].email,
                    phone_number: res.data.data[0].phone_number,
                    gender: res.data.data[0].gender,
                    image: res.data.data[0].profile_url
                });
            });
    }, []);

    const handleClose = () => {
        setEntryOpen(false);
    }

    const handleUserChange = ({ target }) => {
        const { name, value } = target;


        setUser({
            ...user,
            [name]: value
        });
    }

    
    /**
      * Represents Update/Modify Logged-in User Profile Module
      * @module {function} Update/Modify Profile
      */
    const userUpdateApi = (data) => {
<<<<<<< HEAD
        axios.put(`https://ingendynamics.com/api/v1/user?userId=${userId}`,
=======
        axios.put(` https://ingendynamics.com/api/v1/user?userId=${userId}`,
>>>>>>> fd5f6bbcf7a0cd2e0e60dd73656c3f88196b8a0a
            {
                name: data.name,
                email: data.email
            },
            {
                headers: {
                    Authorization: `Bearer ${userToken}`
                }
            })
            .then().catch(error => {
                if (error.reponse.status === 500) {
                    alert('SERVER UNDER MAINTAINENCE, Try again!');
                }
            });
    }

    const handleUserSubmit = (event) => {
        event.preventDefault();
        const data = {
            ...user,
            name: user.name,
            email: user.email
        };

        userUpdateApi(data);
        setEntryOpen(false);

    }

    return (
        &lt;>
            &lt;h1 style={{ margin: '1em 0' }}>Profile Details &lt;Button
                style={{ float: 'right' }}
                startIcon={&lt;EditIcon style={{ fontSize: 30 }} />}
                onClick={() => {
                    setEntryOpen(true);
                }}
            > &lt;/Button>&lt;/h1>
            &lt;hr>&lt;/hr>


            &lt;div style={{
                float: 'left',
                border: '16px solid tomato',
                padding: '2.5em 2em',
                width: '55em',
                borderRadius: '1em'
            }}>
                &lt;h2 style={{ margin: '1em 0' }}>Name: {user.name}&lt;/h2>
                &lt;h2 style={{ margin: '1em 0' }}>Email: {user.email}&lt;/h2>
                &lt;h2 style={{ margin: '1em 0' }}>Contact: {user.phone_number}&lt;/h2>
                {user?.gender &amp;&amp; &lt;h2 style={{ margin: '1em 0' }}>Gender: {user?.gender}&lt;/h2>}
            &lt;/div>
            &lt;div style={{ float: 'right' }}>
                &lt;img src={user.image} />
            &lt;/div>
            &lt;Modal
                open={entryOpen}
                onClose={handleClose}
                disableEnforceFocus
            >
                {entryOpen &amp;&amp; (
                    &lt;ProfileEdit
                        userName={user.name}
                        userEmail={user.email}
                        handleUserChange={handleUserChange}
                        handleUserSubmit={handleUserSubmit}
                    />)}
            &lt;/Modal>
        &lt;/>
    )
}

export default Profile;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2>
    <h3>Login</h3>
    <ul>
        <li><a href="module-Log%2520in.html">Log in</a></li>
        <li><a href="module-Login%2520OTP%2520Verify.html">Login OTP Verify</a></li>
        <li><a href="module-Logout.html">Logout</a></li>
    </ul>
    <h3>Contacts</h3>
    <ul>
        <li><a href="module-Contacts%2520List.html">List</a></li>
        <li><a href="module-update%2520contact.html">Update/Modify</a></li>
    </ul>
    <h3>Behavior Engine</h3>
    <ul>
        <li><a href="module-Behavior%2520List.html">Behavior List</a></li>
        <li><a href="module-Add%2520Behavior.html">Add Behavior</a></li>
        <li><a href="module-Update_Modify%2520Behavior.html">Update/Modify Behavior</a></li>
        <li><a href="module-Delete%2520Behavior.html">Delete Behavior</a></li>
        <li><a href="module-Behavior%2520Steps%2520List.html">Behavior Steps List</a></li>
    </ul>
    <h3>User Profile</h3>
    <ul>
        <li><a href="module-User%2520Profile.html">User Profile</a></li>
        <li><a href="module-Update_Modify%2520Profile.html">Update/Modify Profile</a></li>
    </ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Thu Jun 03 2021 18:29:46 GMT+0530 (India Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
